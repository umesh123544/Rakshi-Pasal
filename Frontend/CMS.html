<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta http-equiv="Content-Security-Policy" content="default-src 'self' https://rakshi-pasal-1.onrender.com;">
  <title>Aaila Pasa - Admin Dashboard</title>
  
  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="16x16" href="https://i.ibb.co/4wqGSsw3/30a825ad-93b8-400c-a1a2-fc658d578ce0-7.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://i.ibb.co/4wqGSsw3/30a825ad-93b8-400c-a1a2-fc658d578ce0-7.png">
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f5f5f5;
      overflow-x: hidden;
    }
    
    /* Admin Header */
    .admin-header {
      background: #111;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    
    .admin-logo {
      font-size: 24px;
      font-weight: 700;
      color: white;
    }
    
    .admin-logo span {
      color: #ff6600;
    }
    
    .admin-user {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .admin-user img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
    }
    
    .admin-user-name {
      font-weight: 600;
    }
    
    .logout-btn {
      background: #ff6600;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .logout-btn:hover {
      background: #e65c00;
    }
    
    /* Admin Sidebar */
    .admin-container {
      display: flex;
      min-height: calc(100vh - 70px);
    }
    
    .admin-sidebar {
      width: 250px;
      background: #222;
      color: white;
      padding: 20px 0;
      transition: all 0.3s ease;
    }
    
    .admin-menu {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .admin-menu li {
      position: relative;
    }
    
    .admin-menu li a {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: #ccc;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .admin-menu li a:hover,
    .admin-menu li a.active {
      background: rgba(255,102,0,0.2);
      color: white;
    }
    
    .admin-menu li a i {
      margin-right: 10px;
      width: 20px;
      text-align: center;
    }
    
    .admin-menu li a.active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      background: #ff6600;
    }
    
    /* Admin Main Content */
    .admin-main {
      flex: 1;
      padding: 20px;
      background: #f5f5f5;
    }
    
    .admin-page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }
    
    .admin-page-title {
      font-size: 24px;
      font-weight: 700;
      color: #333;
    }
    
    .admin-card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      padding: 20px;
      margin-bottom: 20px;
    }
    
    .admin-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    
    .admin-card-title {
      font-size: 18px;
      font-weight: 600;
      color: #333;
    }
    
    .btn {
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      font-weight: 600;
    }
    
    .btn-primary {
      background: #ff6600;
      color: white;
    }
    
    .btn-primary:hover {
      background: #e65c00;
    }
    
    .btn-secondary {
      background: #333;
      color: white;
    }
    
    .btn-secondary:hover {
      background: #555;
    }
    
    /* Stats Cards */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      position: relative;
      overflow: hidden;
    }
    
    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: #ff6600;
    }
    
    .stat-value {
      font-size: 28px;
      font-weight: 700;
      color: #333;
      margin-bottom: 5px;
    }
    
    .stat-label {
      font-size: 14px;
      color: #777;
    }
    
    .stat-icon {
      position: absolute;
      right: 20px;
      top: 20px;
      font-size: 40px;
      color: rgba(255,102,0,0.1);
    }
    
    /* Tables */
    .admin-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .admin-table th {
      background: #f5f5f5;
      padding: 12px 15px;
      text-align: left;
      font-weight: 600;
      color: #555;
    }
    
    .admin-table td {
      padding: 12px 15px;
      border-bottom: 1px solid #eee;
      vertical-align: middle;
    }
    
    .admin-table tr:hover td {
      background: rgba(255,102,0,0.05);
    }
    
    .table-actions {
      display: flex;
      gap: 5px;
    }
    
    .table-actions .btn {
      padding: 5px 10px;
      font-size: 12px;
    }
    
    .status-badge {
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .status-pending {
      background: #fff3cd;
      color: #856404;
    }
    
    .status-processing {
      background: #cce5ff;
      color: #004085;
    }
    
    .status-completed {
      background: #d4edda;
      color: #155724;
    }
    
    .status-cancelled {
      background: #f8d7da;
      color: #721c24;
    }
    
    /* Forms */
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      color: #333;
    }
    
    .form-control {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-family: 'Poppins', sans-serif;
      transition: all 0.3s ease;
    }
    
    .form-control:focus {
      outline: none;
      border-color: #ff6600;
      box-shadow: 0 0 0 2px rgba(255,102,0,0.2);
    }
    
    textarea.form-control {
      min-height: 100px;
      resize: vertical;
    }
    
    .form-row {
      display: flex;
      gap: 15px;
    }
    
    .form-row .form-group {
      flex: 1;
    }
    
    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 20px;
    }
    
    /* Product Images */
    .product-image-preview {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 4px;
      margin-right: 10px;
    }
    
    .image-upload-container {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    /* Responsive Styles */
    @media (max-width: 992px) {
      .admin-sidebar {
        width: 70px;
        overflow: hidden;
      }
      
      .admin-menu li a span {
        display: none;
      }
      
      .admin-menu li a i {
        margin-right: 0;
        font-size: 18px;
      }
    }
    
    @media (max-width: 768px) {
      .admin-container {
        flex-direction: column;
      }
      
      .admin-sidebar {
        width: 100%;
        padding: 10px 0;
      }
      
      .admin-menu {
        display: flex;
        overflow-x: auto;
      }
      
      .admin-menu li {
        flex: 0 0 auto;
      }
      
      .admin-menu li a {
        padding: 10px 15px;
      }
      
      .admin-menu li a.active::before {
        width: 100%;
        height: 3px;
        top: auto;
        bottom: 0;
      }
      
      .form-row {
        flex-direction: column;
        gap: 0;
      }
    }
    
    /* Animations */
    @keyframes fadeIn { 
      from { opacity: 0; transform: translateY(20px); } 
      to { opacity: 1; transform: translateY(0); } 
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }
  </style>
</head>
<body>
<!-- Admin Header -->
<header class="admin-header">
  <div class="admin-logo">
    Aaila <span>पासा</span> Admin
  </div>
  <div class="admin-user">
    <span class="admin-user-name">Admin User</span>
    <img src="https://i.ibb.co/4wqGSsw3/30a825ad-93b8-400c-a1a2-fc658d578ce0-7.png" alt="Admin Avatar">
    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>
</header>

<!-- Admin Container -->
<div class="admin-container">
  <!-- Sidebar -->
  <aside class="admin-sidebar">
    <ul class="admin-menu">
      <li>
        <a href="#" class="active" onclick="showDashboard()">
          <i class="fas fa-tachometer-alt"></i>
          <span>Dashboard</span>
        </a>
      </li>
      <li>
        <a href="#" onclick="showOrders()">
          <i class="fas fa-shopping-bag"></i>
          <span>Orders</span>
        </a>
      </li>
      <li>
        <a href="#" onclick="showProducts()">
          <i class="fas fa-wine-bottle"></i>
          <span>Products</span>
        </a>
      </li>
      <li>
        <a href="#" onclick="showCategories()">
          <i class="fas fa-tags"></i>
          <span>Categories</span>
        </a>
      </li>
      <li>
        <a href="#" onclick="showCustomers()">
          <i class="fas fa-users"></i>
          <span>Customers</span>
        </a>
      </li>
      <li>
        <a href="#" onclick="showReports()">
          <i class="fas fa-chart-bar"></i>
          <span>Reports</span>
        </a>
      </li>
      <li>
        <a href="#" onclick="showSettings()">
          <i class="fas fa-cog"></i>
          <span>Settings</span>
        </a>
      </li>
    </ul>
  </aside>

  <!-- Main Content -->
  <main class="admin-main" id="adminMain">
    <!-- Dashboard Content -->
    <div id="dashboardContent">
      <div class="admin-page-header">
        <h1 class="admin-page-title">Dashboard</h1>
        <div>
          <button class="btn btn-secondary">
            <i class="fas fa-download"></i> Export
          </button>
        </div>
      </div>
      
      <!-- Stats Cards -->
      <div class="stats-container">
        <div class="stat-card fade-in">
          <div class="stat-value">₹42,850</div>
          <div class="stat-label">Today's Revenue</div>
          <div class="stat-icon">
            <i class="fas fa-rupee-sign"></i>
          </div>
        </div>
        
        <div class="stat-card fade-in">
          <div class="stat-value">18</div>
          <div class="stat-label">New Orders</div>
          <div class="stat-icon">
            <i class="fas fa-shopping-bag"></i>
          </div>
        </div>
        
        <div class="stat-card fade-in">
          <div class="stat-value">5</div>
          <div class="stat-label">Pending Orders</div>
          <div class="stat-icon">
            <i class="fas fa-clock"></i>
          </div>
        </div>
        
        <div class="stat-card fade-in">
          <div class="stat-value">32</div>
          <div class="stat-label">Products</div>
          <div class="stat-icon">
            <i class="fas fa-wine-bottle"></i>
          </div>
        </div>
      </div>
      
      <!-- Recent Orders -->
      <div class="admin-card fade-in">
        <div class="admin-card-header">
          <h2 class="admin-card-title">Recent Orders</h2>
          <button class="btn btn-primary" onclick="showOrders()">
            View All
          </button>
        </div>
        
        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Date</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>AP-987654</td>
                <td>John Doe</td>
                <td>2025-05-22</td>
                <td>₹2,950</td>
                <td><span class="status-badge status-processing">Processing</span></td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="viewOrder('AP-987654')">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>AP-987653</td>
                <td>Jane Smith</td>
                <td>2025-05-22</td>
                <td>₹1,250</td>
                <td><span class="status-badge status-completed">Completed</span></td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="viewOrder('AP-987653')">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>AP-987652</td>
                <td>Robert Johnson</td>
                <td>2025-05-21</td>
                <td>₹3,450</td>
                <td><span class="status-badge status-pending">Pending</span></td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="viewOrder('AP-987652')">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>AP-987651</td>
                <td>Sarah Williams</td>
                <td>2025-05-21</td>
                <td>₹895</td>
                <td><span class="status-badge status-cancelled">Cancelled</span></td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="viewOrder('AP-987651')">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Top Products -->
      <div class="admin-card fade-in">
        <div class="admin-card-header">
          <h2 class="admin-card-title">Top Selling Products</h2>
          <button class="btn btn-primary" onclick="showProducts()">
            View All
          </button>
        </div>
        
        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Product</th>
                <th>Category</th>
                <th>Price</th>
                <th>Sold</th>
                <th>Revenue</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Old Durbar Whiskey</td>
                <td>Whiskey</td>
                <td>₹2,950</td>
                <td>24</td>
                <td>₹70,800</td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editProduct(1)">
                      <i class="fas fa-edit"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>Nepal Ice 650ML</td>
                <td>Beer</td>
                <td>₹325</td>
                <td>56</td>
                <td>₹18,200</td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editProduct(2)">
                      <i class="fas fa-edit"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>Canvas Sweet Red Wine</td>
                <td>Wine</td>
                <td>₹895</td>
                <td>18</td>
                <td>₹16,110</td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editProduct(3)">
                      <i class="fas fa-edit"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>Tuborg Strong 650ML</td>
                <td>Beer</td>
                <td>₹410</td>
                <td>15</td>
                <td>₹6,150</td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editProduct(4)">
                      <i class="fas fa-edit"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <!-- Orders Content -->
    <div id="ordersContent" style="display: none;">
      <div class="admin-page-header">
        <h1 class="admin-page-title">Orders</h1>
        <div>
          <button class="btn btn-secondary">
            <i class="fas fa-filter"></i> Filter
          </button>
          <button class="btn btn-secondary">
            <i class="fas fa-download"></i> Export
          </button>
        </div>
      </div>
      
      <div class="admin-card">
        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Date</th>
                <th>Items</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>AP-987654</td>
                <td>John Doe</td>
                <td>2025-05-22 14:30</td>
                <td>3</td>
                <td>₹2,950</td>
                <td>
                  <select class="form-control" onchange="updateOrderStatus('AP-987654', this.value)">
                    <option value="pending">Pending</option>
                    <option value="processing" selected>Processing</option>
                    <option value="completed">Completed</option>
                    <option value="cancelled">Cancelled</option>
                  </select>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="viewOrder('AP-987654')">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="printOrder('AP-987654')">
                      <i class="fas fa-print"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>AP-987653</td>
                <td>Jane Smith</td>
                <td>2025-05-22 12:15</td>
                <td>2</td>
                <td>₹1,250</td>
                <td>
                  <select class="form-control" onchange="updateOrderStatus('AP-987653', this.value)">
                    <option value="pending">Pending</option>
                    <option value="processing">Processing</option>
                    <option value="completed" selected>Completed</option>
                    <option value="cancelled">Cancelled</option>
                  </select>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="viewOrder('AP-987653')">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="printOrder('AP-987653')">
                      <i class="fas fa-print"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>AP-987652</td>
                <td>Robert Johnson</td>
                <td>2025-05-21 18:45</td>
                <td>5</td>
                <td>₹3,450</td>
                <td>
                  <select class="form-control" onchange="updateOrderStatus('AP-987652', this.value)">
                    <option value="pending" selected>Pending</option>
                    <option value="processing">Processing</option>
                    <option value="completed">Completed</option>
                    <option value="cancelled">Cancelled</option>
                  </select>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="viewOrder('AP-987652')">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="printOrder('AP-987652')">
                      <i class="fas fa-print"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>AP-987651</td>
                <td>Sarah Williams</td>
                <td>2025-05-21 16:20</td>
                <td>1</td>
                <td>₹895</td>
                <td>
                  <select class="form-control" onchange="updateOrderStatus('AP-987651', this.value)">
                    <option value="pending">Pending</option>
                    <option value="processing">Processing</option>
                    <option value="completed">Completed</option>
                    <option value="cancelled" selected>Cancelled</option>
                  </select>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="viewOrder('AP-987651')">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="printOrder('AP-987651')">
                      <i class="fas fa-print"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <!-- Products Content -->
    <div id="productsContent" style="display: none;">
      <div class="admin-page-header">
        <h1 class="admin-page-title">Products</h1>
        <div>
          <button class="btn btn-primary" onclick="showAddProduct()">
            <i class="fas fa-plus"></i> Add Product
          </button>
        </div>
      </div>
      
      <div class="admin-card">
        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Category</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <img src="https://i.ibb.co/NdBR861Z/old-durbar-750ml-73537.jpg" alt="Old Durbar Whiskey" class="product-image-preview">
                </td>
                <td>Old Durbar Whiskey</td>
                <td>Whiskey</td>
                <td>₹2,950</td>
                <td>42</td>
                <td>
                  <span class="status-badge status-completed">Active</span>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editProduct(1)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="deleteProduct(1)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <img src="https://i.ibb.co/fGnwYyV2/9d6a25ad33d78e416a97696d4a8e1587.jpg" alt="Canvas Sweet Red Wine" class="product-image-preview">
                </td>
                <td>Canvas Sweet Red Wine</td>
                <td>Wine</td>
                <td>₹895</td>
                <td>18</td>
                <td>
                  <span class="status-badge status-completed">Active</span>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editProduct(2)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="deleteProduct(2)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <img src="https://i.ibb.co/QFc0rcmm/FHb-F8a-Js7a-BW0-Hqe-LJi2r7-Kwox7u-NWAj2sge-VOg-D.png" alt="Nepal Ice" class="product-image-preview">
                </td>
                <td>Nepal Ice 650ML</td>
                <td>Beer</td>
                <td>₹325</td>
                <td>56</td>
                <td>
                  <span class="status-badge status-completed">Active</span>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editProduct(3)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="deleteProduct(3)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <img src="https://i.ibb.co/Kj1qBJKj/Tuborg-650-ML-Bottle.png" alt="Tuborg Strong" class="product-image-preview">
                </td>
                <td>Tuborg Strong 650ML</td>
                <td>Beer</td>
                <td>₹410</td>
                <td>24</td>
                <td>
                  <span class="status-badge status-completed">Active</span>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editProduct(4)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="deleteProduct(4)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <img src="https://i.ibb.co/HLqhyd4Y/8848-Vodka.jpg" alt="8848 Vodka" class="product-image-preview">
                </td>
                <td>8848 Vodka 750ML</td>
                <td>Vodka</td>
                <td>₹2,200</td>
                <td>15</td>
                <td>
                  <span class="status-badge status-completed">Active</span>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editProduct(5)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="deleteProduct(5)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <!-- Add/Edit Product Content -->
    <div id="productFormContent" style="display: none;">
      <div class="admin-page-header">
        <h1 class="admin-page-title" id="productFormTitle">Add New Product</h1>
        <div>
          <button class="btn btn-secondary" onclick="showProducts()">
            <i class="fas fa-arrow-left"></i> Back
          </button>
        </div>
      </div>
      
      <div class="admin-card">
        <form id="productForm">
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Product Name</label>
              <input type="text" class="form-control" id="productName" required>
            </div>
            <div class="form-group">
              <label class="form-label">Category</label>
              <select class="form-control" id="productCategory" required>
                <option value="">Select Category</option>
                <option value="whiskey">Whiskey</option>
                <option value="wine">Wine</option>
                <option value="beer">Beer</option>
                <option value="vodka">Vodka</option>
                <option value="rum">Rum</option>
                <option value="gin">Gin</option>
                <option value="brandy">Brandy</option>
              </select>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Price (₹)</label>
              <input type="number" class="form-control" id="productPrice" min="0" step="1" required>
            </div>
            <div class="form-group">
              <label class="form-label">Stock Quantity</label>
              <input type="number" class="form-control" id="productStock" min="0" step="1" required>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Description</label>
            <textarea class="form-control" id="productDescription" rows="3"></textarea>
          </div>
          
          <div class="form-group">
            <label class="form-label">Product Image</label>
            <div class="image-upload-container">
              <img id="productImagePreview" src="https://via.placeholder.com/100" alt="Product Image" class="product-image-preview">
              <input type="file" id="productImage" accept="image/*" onchange="previewImage(this)">
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Status</label>
            <select class="form-control" id="productStatus">
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
            </select>
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="showProducts()">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Product</button>
          </div>
        </form>
      </div>
    </div>
    
    <!-- Categories Content -->
    <div id="categoriesContent" style="display: none;">
      <div class="admin-page-header">
        <h1 class="admin-page-title">Categories</h1>
        <div>
          <button class="btn btn-primary" onclick="showAddCategory()">
            <i class="fas fa-plus"></i> Add Category
          </button>
        </div>
      </div>
      
      <div class="admin-card">
        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Slug</th>
                <th>Products</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Whiskey</td>
                <td>whiskey</td>
                <td>8</td>
                <td>
                  <span class="status-badge status-completed">Active</span>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editCategory(1)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="deleteCategory(1)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>Wine</td>
                <td>wine</td>
                <td>5</td>
                <td>
                  <span class="status-badge status-completed">Active</span>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editCategory(2)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="deleteCategory(2)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>Beer</td>
                <td>beer</td>
                <td>7</td>
                <td>
                  <span class="status-badge status-completed">Active</span>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editCategory(3)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="deleteCategory(3)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>Vodka</td>
                <td>vodka</td>
                <td>6</td>
                <td>
                  <span class="status-badge status-completed">Active</span>
                </td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="editCategory(4)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="deleteCategory(4)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <!-- Add/Edit Category Content -->
    <div id="categoryFormContent" style="display: none;">
      <div class="admin-page-header">
        <h1 class="admin-page-title" id="categoryFormTitle">Add New Category</h1>
        <div>
          <button class="btn btn-secondary" onclick="showCategories()">
            <i class="fas fa-arrow-left"></i> Back
          </button>
        </div>
      </div>
      
      <div class="admin-card">
        <form id="categoryForm">
          <div class="form-group">
            <label class="form-label">Category Name</label>
            <input type="text" class="form-control" id="categoryName" required>
          </div>
          
          <div class="form-group">
            <label class="form-label">Slug (URL)</label>
            <input type="text" class="form-control" id="categorySlug" required>
          </div>
          
          <div class="form-group">
            <label class="form-label">Description</label>
            <textarea class="form-control" id="categoryDescription" rows="3"></textarea>
          </div>
          
          <div class="form-group">
            <label class="form-label">Status</label>
            <select class="form-control" id="categoryStatus">
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
            </select>
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="showCategories()">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Category</button>
          </div>
        </form>
      </div>
    </div>
    
    <!-- Customers Content -->
    <div id="customersContent" style="display: none;">
      <div class="admin-page-header">
        <h1 class="admin-page-title">Customers</h1>
        <div>
          <button class="btn btn-secondary">
            <i class="fas fa-download"></i> Export
          </button>
        </div>
      </div>
      
      <div class="admin-card">
        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Orders</th>
                <th>Total Spent</th>
                <th>Last Order</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>John Doe</td>
                <td>john@example.com</td>
                <td>+977 9812345678</td>
                <td>5</td>
                <td>₹12,450</td>
                <td>2025-05-22</td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="viewCustomer(1)">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>Jane Smith</td>
                <td>jane@example.com</td>
                <td>+977 9812345679</td>
                <td>3</td>
                <td>₹8,250</td>
                <td>2025-05-20</td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="viewCustomer(2)">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>Robert Johnson</td>
                <td>robert@example.com</td>
                <td>+977 9812345680</td>
                <td>2</td>
                <td>₹5,750</td>
                <td>2025-05-18</td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="viewCustomer(3)">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>Sarah Williams</td>
                <td>sarah@example.com</td>
                <td>+977 9812345681</td>
                <td>1</td>
                <td>₹2,950</td>
                <td>2025-05-15</td>
                <td>
                  <div class="table-actions">
                    <button class="btn btn-primary" onclick="viewCustomer(4)">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <!-- Reports Content -->
    <div id="reportsContent" style="display: none;">
      <div class="admin-page-header">
        <h1 class="admin-page-title">Reports</h1>
        <div>
          <button class="btn btn-secondary">
            <i class="fas fa-download"></i> Export
          </button>
        </div>
      </div>
      
      <div class="admin-card">
        <div class="admin-card-header">
          <h2 class="admin-card-title">Sales Overview</h2>
          <div>
            <select class="form-control" style="width: 150px; display: inline-block;">
              <option>Last 7 Days</option>
              <option>Last 30 Days</option>
              <option>Last 90 Days</option>
              <option>This Year</option>
              <option>Custom Range</option>
            </select>
          </div>
        </div>
        
        <div style="height: 300px; background: #f9f9f9; display: flex; align-items: center; justify-content: center;">
          <p>Sales Chart Will Appear Here</p>
        </div>
      </div>
      
      <div class="admin-card">
        <div class="admin-card-header">
          <h2 class="admin-card-title">Top Customers</h2>
        </div>
        
        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Customer</th>
                <th>Orders</th>
                <th>Total Spent</th>
                <th>Last Order</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>John Doe</td>
                <td>5</td>
                <td>₹12,450</td>
                <td>2025-05-22</td>
              </tr>
              <tr>
                <td>Jane Smith</td>
                <td>3</td>
                <td>₹8,250</td>
                <td>2025-05-20</td>
              </tr>
              <tr>
                <td>Robert Johnson</td>
                <td>2</td>
                <td>₹5,750</td>
                <td>2025-05-18</td>
              </tr>
              <tr>
                <td>Sarah Williams</td>
                <td>1</td>
                <td>₹2,950</td>
                <td>2025-05-15</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <!-- Settings Content -->
    <div id="settingsContent" style="display: none;">
      <div class="admin-page-header">
        <h1 class="admin-page-title">Settings</h1>
      </div>
      
      <div class="admin-card">
        <form id="settingsForm">
          <h3 class="admin-card-title">General Settings</h3>
          
          <div class="form-group">
            <label class="form-label">Store Name</label>
            <input type="text" class="form-control" id="storeName" value="Aaila Pasa" required>
          </div>
          
          <div class="form-group">
            <label class="form-label">Store Logo</label>
            <div class="image-upload-container">
              <img id="storeLogoPreview" src="https://i.ibb.co/4wqGSsw3/30a825ad-93b8-400c-a1a2-fc658d578ce0-7.png" alt="Store Logo" class="product-image-preview">
              <input type="file" id="storeLogo" accept="image/*" onchange="previewImage(this, 'storeLogoPreview')">
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Currency</label>
            <select class="form-control" id="storeCurrency">
              <option value="NPR" selected>Nepalese Rupee (₹)</option>
              <option value="USD">US Dollar ($)</option>
              <option value="EUR">Euro (€)</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label">Delivery Fee (Ring Road Area)</label>
            <input type="number" class="form-control" id="deliveryFee1" value="100" min="0" required>
          </div>
          
          <div class="form-group">
            <label class="form-label">Delivery Fee (Outside Ring Road)</label>
            <input type="number" class="form-control" id="deliveryFee2" value="200" min="0" required>
          </div>
          
          <h3 class="admin-card-title" style="margin-top: 30px;">Contact Information</h3>
          
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" id="contactEmail" value="aailapasa@gmail.com" required>
            </div>
            <div class="form-group">
              <label class="form-label">Phone</label>
              <input type="tel" class="form-control" id="contactPhone" value="+977 9813197704" required>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">Address</label>
            <textarea class="form-control" id="contactAddress" rows="2" required>Thulobharang, Kathmandu, Nepal</textarea>
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn btn-secondary">Reset</button>
            <button type="submit" class="btn btn-primary">Save Settings</button>
          </div>
        </form>
      </div>
    </div>
  </main>
</div>

<script>
 // config.js
const config = {
  API_BASE_URL: 'https://rakshi-pasal-1.onrender.com/api', // Update with your actual backend URL
  TOKEN_KEY: 'aailaPasaAdminToken'
};

// auth.js
class AuthService {
  static getToken() {
    return localStorage.getItem(config.TOKEN_KEY);
  }

  static setToken(token) {
    localStorage.setItem(config.TOKEN_KEY, token);
  }

  static removeToken() {
    localStorage.removeItem(config.TOKEN_KEY);
  }

  static isAuthenticated() {
    return !!this.getToken();
  }

  static getAuthHeaders() {
    return {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${this.getToken()}`
    };
  }

  static async login(username, password) {
    try {
      const response = await fetch(`${config.API_BASE_URL}/auth/login`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      });

      if (!response.ok) {
        throw new Error('Login failed');
      }

      const data = await response.json();
      this.setToken(data.token);
      return data;
    } catch (error) {
      console.error('Login error:', error);
      throw error;
    }
  }

  static logout() {
    this.removeToken();
    window.location.href = 'login.html';
  }
}

// api.js
class ApiService {
  static async fetchProducts() {
    const response = await fetch(`${config.API_BASE_URL}/products`, {
      headers: AuthService.getAuthHeaders()
    });
    return this.handleResponse(response);
  }

  static async fetchProductById(id) {
    const response = await fetch(`${config.API_BASE_URL}/products/${id}`, {
      headers: AuthService.getAuthHeaders()
    });
    return this.handleResponse(response);
  }

  static async saveProduct(productData) {
    const method = productData._id ? 'PUT' : 'POST';
    const url = productData._id 
      ? `${config.API_BASE_URL}/products/${productData._id}`
      : `${config.API_BASE_URL}/products`;

    const response = await fetch(url, {
      method,
      headers: AuthService.getAuthHeaders(),
      body: JSON.stringify(productData)
    });
    return this.handleResponse(response);
  }

  static async deleteProduct(id) {
    const response = await fetch(`${config.API_BASE_URL}/products/${id}`, {
      method: 'DELETE',
      headers: AuthService.getAuthHeaders()
    });
    return this.handleResponse(response);
  }

  static async fetchOrders() {
    const response = await fetch(`${config.API_BASE_URL}/orders`, {
      headers: AuthService.getAuthHeaders()
    });
    return this.handleResponse(response);
  }

  static async updateOrderStatus(id, status) {
    const response = await fetch(`${config.API_BASE_URL}/orders/${id}/status`, {
      method: 'PUT',
      headers: AuthService.getAuthHeaders(),
      body: JSON.stringify({ status })
    });
    return this.handleResponse(response);
  }

  static async fetchCategories() {
    const response = await fetch(`${config.API_BASE_URL}/categories`, {
      headers: AuthService.getAuthHeaders()
    });
    return this.handleResponse(response);
  }

  static async saveCategory(categoryData) {
    const method = categoryData._id ? 'PUT' : 'POST';
    const url = categoryData._id 
      ? `${config.API_BASE_URL}/categories/${categoryData._id}`
      : `${config.API_BASE_URL}/categories`;

    const response = await fetch(url, {
      method,
      headers: AuthService.getAuthHeaders(),
      body: JSON.stringify(categoryData)
    });
    return this.handleResponse(response);
  }

  static async deleteCategory(id) {
    const response = await fetch(`${config.API_BASE_URL}/categories/${id}`, {
      method: 'DELETE',
      headers: AuthService.getAuthHeaders()
    });
    return this.handleResponse(response);
  }

  static async handleResponse(response) {
    if (!response.ok) {
      const error = await response.json();
      throw new Error(error.message || 'Request failed');
    }
    return response.json();
  }
}

// ui.js
class UI {
  static init() {
    this.checkAuth();
    this.bindEvents();
    this.loadCurrentPage();
  }

  static checkAuth() {
    if (!AuthService.isAuthenticated() && !window.location.pathname.endsWith('login.html')) {
      window.location.href = 'login.html';
    }
  }

  static bindEvents() {
    // Navigation
    document.querySelectorAll('[data-nav]').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        this.showSection(link.dataset.nav);
      });
    });

    // Product form
    if (document.getElementById('productForm')) {
      document.getElementById('productForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        await this.handleProductFormSubmit();
      });
    }

    // Category form
    if (document.getElementById('categoryForm')) {
      document.getElementById('categoryForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        await this.handleCategoryFormSubmit();
      });
    }

    // Settings form
    if (document.getElementById('settingsForm')) {
      document.getElementById('settingsForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        await this.handleSettingsFormSubmit();
      });
    }

    // Logout
    if (document.getElementById('logoutBtn')) {
      document.getElementById('logoutBtn').addEventListener('click', () => {
        if (confirm('Are you sure you want to logout?')) {
          AuthService.logout();
        }
      });
    }
  }

  static async loadCurrentPage() {
    try {
      const path = window.location.pathname;
      
      if (path.endsWith('cms.html')) {
        await this.loadDashboard();
      } else if (path.endsWith('products.html')) {
        await this.loadProducts();
      } else if (path.endsWith('orders.html')) {
        await this.loadOrders();
      } else if (path.endsWith('categories.html')) {
        await this.loadCategories();
      }
    } catch (error) {
      this.showError(error);
    }
  }

  static async loadDashboard() {
    const [products, orders] = await Promise.all([
      ApiService.fetchProducts(),
      ApiService.fetchOrders()
    ]);

    this.renderDashboardStats(products, orders);
    this.renderRecentOrders(orders);
    this.renderTopProducts(products);
  }

  static async loadProducts() {
    const products = await ApiService.fetchProducts();
    this.renderProducts(products);
  }

  static async loadOrders() {
    const orders = await ApiService.fetchOrders();
    this.renderOrders(orders);
  }

  static async loadCategories() {
    const categories = await ApiService.fetchCategories();
    this.renderCategories(categories);
  }

  static renderDashboardStats(products, orders) {
    const today = new Date().toISOString().split('T')[0];
    const todayOrders = orders.filter(order => order.date.includes(today));
    const pendingOrders = orders.filter(order => order.status === 'pending');
    const completedOrders = orders.filter(order => order.status === 'completed');

    document.getElementById('todayRevenue').textContent = 
      todayOrders.reduce((sum, order) => sum + order.totalAmount, 0);
    document.getElementById('newOrders').textContent = todayOrders.length;
    document.getElementById('pendingOrders').textContent = pendingOrders.length;
    document.getElementById('totalProducts').textContent = products.length;
  }

  static renderRecentOrders(orders) {
    const tbody = document.querySelector('#recentOrders tbody');
    tbody.innerHTML = '';

    orders.slice(0, 5).forEach(order => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${order.orderId}</td>
        <td>${order.customer.name}</td>
        <td>${order.date.split('T')[0]}</td>
        <td>₹${order.totalAmount}</td>
        <td><span class="status-badge status-${order.status}">${this.formatStatus(order.status)}</span></td>
        <td>
          <button class="btn btn-primary" onclick="UI.viewOrder('${order._id}')">
            <i class="fas fa-eye"></i>
          </button>
        </td>
      `;
      tbody.appendChild(tr);
    });
  }

  static renderTopProducts(products) {
    const tbody = document.querySelector('#topProducts tbody');
    tbody.innerHTML = '';

    products.sort((a, b) => b.sold - a.sold).slice(0, 5).forEach(product => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${product.name}</td>
        <td>${this.formatCategory(product.category)}</td>
        <td>₹${product.price}</td>
        <td>${product.sold || 0}</td>
        <td>₹${(product.price * (product.sold || 0)).toFixed(2)}</td>
        <td>
          <button class="btn btn-primary" onclick="UI.editProduct('${product._id}')">
            <i class="fas fa-edit"></i>
          </button>
        </td>
      `;
      tbody.appendChild(tr);
    });
  }

  static renderProducts(products) {
    const tbody = document.querySelector('#productsTable tbody');
    tbody.innerHTML = '';

    products.forEach(product => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td><img src="${product.imageUrl || 'https://via.placeholder.com/100'}" class="product-image-preview"></td>
        <td>${product.name}</td>
        <td>${this.formatCategory(product.category)}</td>
        <td>₹${product.price}</td>
        <td>${product.stock}</td>
        <td><span class="status-badge ${product.status === 'active' ? 'status-completed' : 'status-cancelled'}">
          ${product.status === 'active' ? 'Active' : 'Inactive'}
        </span></td>
        <td>
          <button class="btn btn-primary" onclick="UI.editProduct('${product._id}')">
            <i class="fas fa-edit"></i>
          </button>
          <button class="btn btn-secondary" onclick="UI.deleteProductPrompt('${product._id}')">
            <i class="fas fa-trash"></i>
          </button>
        </td>
      `;
      tbody.appendChild(tr);
    });
  }

  static renderOrders(orders) {
    const tbody = document.querySelector('#ordersTable tbody');
    tbody.innerHTML = '';

    orders.forEach(order => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${order.orderId}</td>
        <td>${order.customer.name}</td>
        <td>${order.date.split('T')[0]}</td>
        <td>${order.items.length}</td>
        <td>₹${order.totalAmount}</td>
        <td>
          <select class="form-control" onchange="UI.updateOrderStatus('${order._id}', this.value)">
            <option value="pending" ${order.status === 'pending' ? 'selected' : ''}>Pending</option>
            <option value="processing" ${order.status === 'processing' ? 'selected' : ''}>Processing</option>
            <option value="completed" ${order.status === 'completed' ? 'selected' : ''}>Completed</option>
            <option value="cancelled" ${order.status === 'cancelled' ? 'selected' : ''}>Cancelled</option>
          </select>
        </td>
        <td>
          <button class="btn btn-primary" onclick="UI.viewOrder('${order._id}')">
            <i class="fas fa-eye"></i>
          </button>
          <button class="btn btn-secondary" onclick="UI.printOrder('${order._id}')">
            <i class="fas fa-print"></i>
          </button>
        </td>
      `;
      tbody.appendChild(tr);
    });
  }

  static renderCategories(categories) {
    const tbody = document.querySelector('#categoriesTable tbody');
    tbody.innerHTML = '';

    categories.forEach(category => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${category.name}</td>
        <td>${category.slug}</td>
        <td>${category.productCount || 0}</td>
        <td><span class="status-badge ${category.status === 'active' ? 'status-completed' : 'status-cancelled'}">
          ${category.status === 'active' ? 'Active' : 'Inactive'}
        </span></td>
        <td>
          <button class="btn btn-primary" onclick="UI.editCategory('${category._id}')">
            <i class="fas fa-edit"></i>
          </button>
          <button class="btn btn-secondary" onclick="UI.deleteCategoryPrompt('${category._id}')">
            <i class="fas fa-trash"></i>
          </button>
        </td>
      `;
      tbody.appendChild(tr);
    });
  }

  static async handleProductFormSubmit() {
    try {
      const formData = {
        name: document.getElementById('productName').value,
        category: document.getElementById('productCategory').value,
        price: parseFloat(document.getElementById('productPrice').value),
        stock: parseInt(document.getElementById('productStock').value),
        description: document.getElementById('productDescription').value,
        status: document.getElementById('productStatus').value
      };

      const productId = document.getElementById('productId')?.value;
      if (productId) formData._id = productId;

      await ApiService.saveProduct(formData);
      this.showSuccess('Product saved successfully');
      this.showSection('products');
      await this.loadProducts();
    } catch (error) {
      this.showError(error);
    }
  }

  static async handleCategoryFormSubmit() {
    try {
      const formData = {
        name: document.getElementById('categoryName').value,
        slug: document.getElementById('categorySlug').value,
        description: document.getElementById('categoryDescription').value,
        status: document.getElementById('categoryStatus').value
      };

      const categoryId = document.getElementById('categoryId')?.value;
      if (categoryId) formData._id = categoryId;

      await ApiService.saveCategory(formData);
      this.showSuccess('Category saved successfully');
      this.showSection('categories');
      await this.loadCategories();
    } catch (error) {
      this.showError(error);
    }
  }

  static async handleSettingsFormSubmit() {
    try {
      // Implement settings save logic
      this.showSuccess('Settings saved successfully');
    } catch (error) {
      this.showError(error);
    }
  }

  static async editProduct(id) {
    try {
      const product = await ApiService.fetchProductById(id);
      this.showSection('productForm');
      
      document.getElementById('productFormTitle').textContent = 'Edit Product';
      document.getElementById('productName').value = product.name;
      document.getElementById('productCategory').value = product.category;
      document.getElementById('productPrice').value = product.price;
      document.getElementById('productStock').value = product.stock;
      document.getElementById('productDescription').value = product.description;
      document.getElementById('productStatus').value = product.status;
      
      if (product.imageUrl) {
        document.getElementById('productImagePreview').src = product.imageUrl;
      }

      if (!document.getElementById('productId')) {
        const input = document.createElement('input');
        input.type = 'hidden';
        input.id = 'productId';
        document.getElementById('productForm').appendChild(input);
      }
      document.getElementById('productId').value = product._id;
    } catch (error) {
      this.showError(error);
    }
  }

  static async deleteProductPrompt(id) {
    if (confirm('Are you sure you want to delete this product?')) {
      try {
        await ApiService.deleteProduct(id);
        this.showSuccess('Product deleted successfully');
        await this.loadProducts();
      } catch (error) {
        this.showError(error);
      }
    }
  }

  static async updateOrderStatus(id, status) {
    try {
      await ApiService.updateOrderStatus(id, status);
      this.showSuccess('Order status updated successfully');
    } catch (error) {
      this.showError(error);
    }
  }

  static showSection(sectionId) {
    document.querySelectorAll('.content-section').forEach(section => {
      section.style.display = 'none';
    });
    document.getElementById(sectionId).style.display = 'block';
    this.updateActiveNav(sectionId);
  }

  static updateActiveNav(sectionId) {
    document.querySelectorAll('.nav-link').forEach(link => {
      link.classList.remove('active');
    });
    document.querySelector(`[data-nav="${sectionId}"]`).classList.add('active');
  }

  static formatStatus(status) {
    const statusMap = {
      pending: 'Pending',
      processing: 'Processing',
      completed: 'Completed',
      cancelled: 'Cancelled'
    };
    return statusMap[status] || status;
  }

  static formatCategory(category) {
    return category.charAt(0).toUpperCase() + category.slice(1);
  }

  static showSuccess(message) {
    // Implement toast or alert for success messages
    alert(message);
  }

  static showError(error) {
    // Implement toast or alert for error messages
    console.error(error);
    alert(error.message || 'An error occurred');
  }

  // Placeholder methods for unimplemented features
  static viewOrder(id) {
    alert(`View order ${id}`);
    // Implement order detail view
  }

  static printOrder(id) {
    alert(`Print order ${id}`);
    // Implement print functionality
  }

  static editCategory(id) {
    alert(`Edit category ${id}`);
    // Implement category edit
  }

  static deleteCategoryPrompt(id) {
    alert(`Delete category ${id}`);
    // Implement category delete
  }
}

  // Authentication check
  document.addEventListener('DOMContentLoaded', function() {
    if (!localStorage.getItem('aailaPasaAdminToken')) {
      window.location.href = 'login.html';
    }
  });

// Initialize the CMS when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  UI.init();
});
  
</script>
</body>
</html>
